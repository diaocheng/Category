/*!
 * category v1.0.0 (https://github.com/diaocheng/category#readme)
 * Copyright 2016 程刁
 * Licensed under MIT
 */
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"function"==typeof define&&define.cmd?define(function(b,c,d){a(b("jquery"))}):a(jQuery)}(function(a){function b(c,d){this.$target=c,this.options=a.extend({},b.DEFAULTS,"object"==typeof d&&d),this.init()}b.DEFAULTS={name:"分类",key:null,url:void 0,formdata:null,all:{name:"全部",value:"all"}},b.prototype={init:function(){var a=this;a.bindEvent(),"object"==typeof a.options.data?a.render():"string"==typeof a.options.url&&a.getData()},getData:function(b){var c=this;if(c.options=a.extend({},c.options,"object"==typeof b&&b),"undefined"==typeof c.options.url)throw new Error("未定义url");a.ajax({url:c.options.url,type:"POST",data:c.options.formdata,dataType:"json",success:function(a){c.render({data:a})},error:function(a){try{console.warn(a)}catch(a){}}})},render:function(b){var c=this;c.options=a.extend({},c.options,"object"==typeof b&&b),c.options.data=c.options.key&&c.options.data[c.options.key]?c.options.data[c.options.key]:c.options.data;var d=a("<li></li>").text(c.options.name+":"),e=a('<li class="active"><a href="javascript:void(0)">'+c.options.all.name+"</a></li>");e.data(c.options.key,c.options.all.value),c.$target.empty().append(d).append(e).data("key",c.options.all.value);var f=[];a.each(c.options.data,function(b,d){var e=a('<li><a href="javascript:void(0)">'+d+"</a></li>");e.data(c.options.key,d),f.push(e)}),c.$target.append(f)},bindEvent:function(){var b=this;b.$target.on("click.category","li>a",function(){var c=a(this).parent("li");c.addClass("active").siblings("li").removeClass("active"),b.$target.data("key",c.data(b.options.key))})}},b.API=["getData","render"],a.fn.category=function(c,d){if(this.length<=0)return this;if("object"==typeof this.data("category")){if("string"==typeof c&&a.inArray(c,b.API)!==-1){var e=c,f=this.data("category");f[e](d)}}else this.data("category",new b(this,c));return this}});